[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers (tags)
markers =
    quick: Quick tests (<5s)
    slow: Slow tests (>30s)
    critical: Critical tests that must pass
    important: Important tests
    informational: Informational tests
    readonly: Tests that don't modify cluster
    write: Tests that create/modify resources
    argocd: ArgoCD tests
    workloads: Workload tests
    vault: Vault tests
    backup: Backup tests
    observability: Observability tests
    ingress: Ingress tests
    dns: DNS tests
    oauth2: OAuth2 tests
    oauth_redirect: OAuth redirect verification tests (no login)
    authenticated: Tests requiring full GitHub authentication
    smoke: Smoke test suite (read-only)
    full: Full test suite including writes
    ui: UI tests (Selenium/Playwright)
    gitops: GitOps deployment workflow tests
    gitops_deployment: GitOps deployment workflow test
    letsencrypt: LetsEncrypt certificate tests
    externalsecrets: External Secrets Operator integration test
    preview_environments: Preview environment PR workflow tests
    clear_repo_path: Specify path to clear in ephemeral GitHub repo (default: apps)
    flaky: Flaky tests that should be retried on failure
    captain_manifests: Create dynamic ArgoCD manifests in captain domain repo (runs serially with -n0)

# Output
console_output_style = progress

# Test execution
addopts = 
    --color=yes 
    --strict-markers
    --tb=short
    -v

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
